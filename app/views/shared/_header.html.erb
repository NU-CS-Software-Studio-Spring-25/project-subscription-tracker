<!-- app/views/shared/_header.html.erb -->
<nav class="navbar navbar-light bg-light shadow-sm mb-3">
  <div class="container-fluid d-flex px-5 align-items-center">

    <!-- Logo (always left) -->
    <%= link_to root_path, class: 'navbar-brand d-flex align-items-center' do %>
      <%= image_tag 'logo.png', alt: 'Logo', style: 'height:3rem;' %>
    <% end %>

    <!-- Desktop nav links (centered, hidden <lg) -->
    <ul class="navbar-nav d-none d-lg-flex flex-row gap-5 mx-auto">
      <li class="nav-item">
        <%= link_to 'Subscriptions', '/subscriptions',
                    class: 'nav-link fw-bold text-black' %>
      </li>
      <li class="nav-item">
        <%= link_to 'Categories', '/categories',
                    class: 'nav-link fw-bold text-black' %>
      </li>
      <li class="nav-item">
        <%= link_to 'Budgeting', '/categories/budgeting',
                    class: 'nav-link fw-bold text-black' %>
      </li>
    </ul>

    <!-- Desktop auth links (right, hidden <lg) -->
    <ul class="navbar-nav d-none d-lg-flex flex-row gap-3">
      <% if user_signed_in? %>
        <li class="nav-item">
          <span class="nav-link text-black fw-bold">Logged in as <%= current_user.email %></span>
        </li>
        <li class="nav-item">
          <%= button_to 'Logout',
                      destroy_user_session_path,
                      method: :delete,
                      class: 'nav-link fw-bold text-black' %>
        </li>
      <% else %>
        <li class="nav-item">
          <%= link_to 'Login',
                      new_user_session_path,
                      class: 'nav-link fw-bold text-black' %>
        </li>
        <li class="nav-item">
          <%= link_to 'Sign up',
                      new_user_registration_path,
                      class: 'nav-link fw-bold text-black' %>
        </li>
      <% end %>
    </ul>

    <!-- Mobile burger (centered on <lg) -->
    <button class="navbar-toggler d-lg-none" type="button"
            data-bs-toggle="collapse" data-bs-target="#mobileNav"
            aria-controls="mobileNav" aria-expanded="false"
            aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>

  <!-- Mobile-only collapsed menu -->
  <div class="collapse d-lg-none" id="mobileNav">
    <div class="container-fluid bg-light px-5 py-3">
      <ul class="navbar-nav">
        <!-- nav links -->
        <li class="nav-item">
          <%= link_to 'Subscriptions', '/subscriptions',
                      class: 'nav-link fw-bolder text-black' %>
        </li>
        <li class="nav-item">
          <%= link_to 'Categories', '/categories',
                      class: 'nav-link fw-bolder text-black' %>
        </li>
        <li class="nav-item">
          <%= link_to 'Budgeting', '/categories/budgeting',
                      class: 'nav-link fw-bolder text-black' %>
        </li>
        <li><hr class="my-2"></li>
        <!-- auth links -->
        <% if user_signed_in? %>
          <li class="nav-item">
            <span class="nav-link fw-bolder text-black">Logged in as <%= current_user.email %></span>
          </li>
          <li class="nav-item">
            <%= link_to 'Logout',
                        destroy_user_session_path,
                        method: :delete,
                        class: 'nav-link fw-bolder text-black' %>
          </li>
        <% else %>
          <li class="nav-item">
            <%= link_to 'Login',
                        new_user_session_path,
                        class: 'nav-link fw-bolder text-black' %>
          </li>
          <li class="nav-item">
            <%= link_to 'Sign up',
                        new_user_registration_path,
                        class: 'nav-link fw-bolder text-black' %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</nav>
